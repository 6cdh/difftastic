============================================
Functions
============================================
function() 1
function() {}
function(arg1, arg2) {
  arg2
}

function(x, y) return(y)

function(x, ...) f(...)

----

(program
  (function_definition (formal_parameters) (integer))
  (function_definition (formal_parameters) (brace_list))
  (function_definition
    (formal_parameters (identifier) (identifier))
    (brace_list (identifier)))
  (function_definition
    (formal_parameters (identifier) (identifier))
    (return (identifier)))
  (function_definition
    (formal_parameters (identifier) (dots))
    (call (identifier) (arguments (dots)))))

==========
relational
==========

a == b

---
(program
  (binary
    (identifier) (identifier)))

========
additive
========

a + b

---

(program
  (binary
    (identifier) (identifier)))

========
multiplicative
========

a * b

---

(program
  (binary
    (identifier) (identifier)))

==============
binary operations
==============

2+2*2

---

(program
  (binary
    (integer)
    (binary
       (integer)
       (integer))))

===========
unary minus
===========

-a
foo(-a, bar)

---

(program
  (unary (identifier))
  (call (identifier) 
    (arguments
      (unary (identifier))
      (identifier))))

===========
binary minus
===========

foo-a

---

(program
  (binary (identifier) (identifier)))


===================
Operator precedence
===================

a <= b && c >= d
a[1] <- foo || bar
a && b(c) && d
val <- foo %>% bar(1) %>% baz()
---

(program

  (binary
    (binary (identifier) (identifier))
    (binary (identifier) (identifier)))

  (left_assignment
   name: (subset (identifier) (arguments value: (integer)))
   value: (binary (identifier) (identifier)))

  (binary
     (binary (identifier) (call function: (identifier) arguments: (arguments value: (identifier))))
     (identifier))

  (left_assignment
   name: (identifier)
   value: (binary
     (binary
      (identifier)
      (special)
      (call
       function: (identifier)
       arguments: (arguments value: (integer))))
     (special)
     (call
      function: (identifier)))))

========
Specials
========

x %% y

x %+% y

x %>% y

x %some text% y

x %some \% escaped text% y

---

(program
  (binary (identifier) (special) (identifier))
  (binary (identifier) (special) (identifier))
  (binary (identifier) (special) (identifier))
  (binary (identifier) (special) (identifier))
  (binary (identifier) (special (escape_sequence)) (identifier)))

===========
subset
===========

foo[bar]
foo[1, 2]
foo[1, ]

---

(program
  (subset
    (identifier)
    (arguments
     (identifier)))
  (subset
    (identifier)
    (arguments
      (integer)
      (integer)))
  (subset
    (identifier)
    (arguments
      (integer))))

============================================
If
============================================

if (x)
  log(y)

if (a.b) {
  log(c)
  d
}

----

(program
  (if
    condition: (identifier)
    consequence: (call function: (identifier) arguments: (arguments value: (identifier))))
  (if
    condition: (identifier)
    consequence: (brace_list
      (call
       function: (identifier)
       arguments: (arguments value: (identifier)))
      (identifier))))

============================================
If-else
============================================

if (x)
  y
else if (a)
  b

if (a) {
  c
  d
} else {
  e
}

----

(program
  (if
   condition: (identifier)
   consequence: (identifier)
   alternative: (if
     condition: (identifier)
     consequence: (identifier)))

  (if
   condition: (identifier)
   consequence: (brace_list (identifier) (identifier))
   alternative: (brace_list (identifier))))


===
for
===

for (x in y)
  f

---

(program
  (for
    name: (identifier)
    vector: (identifier)
    body: (identifier)))

=====
While
=====
while(TRUE)
  bar

while(x > 0)
  x <- x - 1

while(TRUE)
  break

while(TRUE)
  next

---

(program
  (while
    condition: (true)
    body: (identifier))

  (while
    condition: (binary (identifier) (integer))
    body: (left_assignment name: (identifier) value: (binary (identifier) (integer))))

  (while
    condition: (true)
    body: (break))

  (while
    condition: (true)
    body: (next)))

=====
Repeat
=====

repeat 1

---

(program
  (repeat
    body: (integer)))

============================================
Namespace get
============================================

foo::bar
foo::bar(1)

---

(program
  (namespace_get
    namespace: (identifier)
    function: (identifier))
  (call
    function: (namespace_get
     namespace: (identifier)
     function: (identifier))
    arguments: (arguments value: (integer))))

==========
Assignment
==========

x <- 1
x = 1
x <<- 1
1 -> x
x <- y(1)
y(1) -> x

---

(program
  (left_assignment
    name: (identifier)
    value: (integer))

  (equals_assignment
    name: (identifier)
    value: (integer))

  (super_assignment
   name: (identifier)
   value: (integer))

  (right_assignment
   value: (integer)
   name: (identifier))

  (left_assignment
   name: (identifier)
   value: (call function: (identifier) arguments: (arguments value: (integer))))

  (right_assignment
   value: (call function: (identifier) arguments: (arguments value: (integer)))
   name: (identifier)))

=====
calls
=====

f()
f(x)
f(x, )
f(x, y)
f(x, y = 2)
f(x, y =)

---

(program

  (call function: (identifier))

  (call
    function: (identifier)
    arguments: (arguments value: (identifier)))

  (call
    function: (identifier)
    arguments: (arguments value: (identifier)))

  (call
    function: (identifier)
    arguments: (arguments value: (identifier) value: (identifier)))

  (call
    function: (identifier)
    arguments: (arguments value: (identifier) name: (identifier) value: (integer)))

  (call
    function: (identifier)
    arguments: (arguments value: (identifier) name: (identifier))))
